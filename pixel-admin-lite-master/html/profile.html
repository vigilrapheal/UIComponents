<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" type="image/png" sizes="16x16" href="../plugins/images/favicon.png">
	<title>Pixel Admin - Responsive Admin Dashboard Template build
		with Twitter Bootstrap</title>
	<!-- Bootstrap Core CSS -->
	<link href="bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<!-- Menu CSS -->
	<link href="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet">
	<!-- animation CSS -->
	<link href="css/animate.css" rel="stylesheet">
	<!-- Custom CSS -->
	<link href="css/style.css" rel="stylesheet">
	<!-- color CSS -->
	<link href="css/colors/blue-dark.css" id="theme" rel="stylesheet">
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

</head>

<body>
	<!-- Preloader -->
	<div class="preloader">
		<div class="cssload-speeding-wheel"></div>
	</div>
	<div id="wrapper">
		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top m-b-0">
			<div class="navbar-header">
				<a class="navbar-toggle hidden-sm hidden-md hidden-lg " href="javascript:void(0)" data-toggle="collapse"
				 data-target=".navbar-collapse"><i class="fa fa-bars"></i></a>
				<div class="top-left-part">
					<a class="logo" href="index.html"><b><img src="../plugins/images/pixeladmin-logo.png" alt="home" /></b><span class="hidden-xs"><img
							 src="../plugins/images/pixeladmin-text.png" alt="home" /></span></a>
				</div>
				<ul class="nav navbar-top-links navbar-left m-l-20 hidden-xs">
					<li>
						<form role="search" class="app-search hidden-xs">
							<input type="text" placeholder="Search..." class="form-control">
							<a href=""><i class="fa fa-search"></i></a>
						</form>
					</li>
				</ul>
				<ul class="nav navbar-top-links navbar-right pull-right">
					<li><a class="profile-pic" href="#"> <img src="../plugins/images/users/varun.jpg" alt="user-img" width="36" class="img-circle"><b
							 class="hidden-xs" id="nameHere"></b>
						</a></li>
				</ul>
			</div>
			<!-- /.navbar-header -->
			<!-- /.navbar-top-links -->
			<!-- /.navbar-static-side -->
		</nav>
		<!-- Left navbar-header -->
		<div class="navbar-default sidebar" role="navigation">
			<div class="sidebar-nav navbar-collapse slimscrollsidebar">
				<ul class="nav" id="side-menu">
					<li style="padding: 10px 0 0;"><a href="/login" class="waves-effect"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i><span
							 class="hide-menu">Dashboard</span></a></li>
					<li><a href="/profile" class="waves-effect"><i class="fa fa-user fa-fw" aria-hidden="true"></i><span class="hide-menu">Profile</span></a></li>
					<li><a href="/run" class="waves-effect"><i class="fa fa-play fa-fw" aria-hidden="true"></i><span class="hide-menu">Run</span></a></li>
				</ul>
			</div>
		</div>
		<!-- Left navbar-header end -->
		<!-- Page Content -->
		<div id="page-wrapper">
			<div class="container-fluid">
				<div class="row bg-title">
					<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
						<h4 class="page-title">Profile page</h4>
					</div>
					<div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
						<a href="/login" class="btn btn-danger pull-right m-l-20 btn-rounded btn-outline hidden-xs hidden-sm waves-effect waves-light">Logout</a>
						<ol class="breadcrumb">
							<li><a href="#">Dashboard</a></li>
							<li class="active">Profile page</li>
						</ol>
					</div>
				</div>
				<!-- /.row -->
				<!-- .row -->
				<div class="row">
					<div class="col-md-4 col-xs-12">
						<div class="white-box">
							<div class="user-bg">
								<img width="100%" alt="user" src="../plugins/images/large/img1.jpg">
								<div class="overlay-box">
									<div class="user-content">
										<a href="javascript:void(0)"><img src="../plugins/images/users/genu.jpg" class="thumb-lg img-circle" alt="img"></a>
										<h4 class="text-white" id="name"></h4>
										<h5 class="text-white" id="companyEmail"></h5>
									</div>
								</div>
							</div>
							<div class="user-btm-box">
								<div class="col-md-4 col-sm-4 text-center">
									<p class="text-purple">
										<i class="ti-facebook"></i>
									</p>
									<h1>258</h1>
								</div>
								<div class="col-md-4 col-sm-4 text-center">
									<p class="text-blue">
										<i class="ti-twitter"></i>
									</p>
									<h1>125</h1>
								</div>
								<div class="col-md-4 col-sm-4 text-center">
									<p class="text-danger">
										<i class="ti-dribbble"></i>
									</p>
									<h1>556</h1>
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-8 col-xs-12" id="userProfile">
						<div class="white-box">
							<div class="form-horizontal form-material">
								<div class="form-group">
									<label class="col-md-12">Name</label>
									<div class="col-md-12">
										<b id="name">
											<h3></h3>
										</b>
									</div>
								</div>
								<div class="form-group">
									<label for="example-email" class="col-md-12">Company
										Email</label>
									<div class="col-md-12">
										<b id="companyEmail">
											<h3></h3>
										</b>
									</div>
								</div>
								<div class="form-group">
									<label for="example-email" class="col-md-12">Email</label>
									<div class="col-md-12">
										<b id="email">
											<h3></h3>
										</b>
									</div>
								</div>
								<div class="form-group">
									<label class="col-md-12">Password</label>
									<div class="col-md-12">
										<b>
											<h3>*************</h3>
										</b>
									</div>
								</div>
								<div class="form-group">
									<label class="col-md-12">Phone No</label>
									<div class="col-md-12">
										<b id="phone">
											<h3></h3>
										</b>
									</div>
								</div>
								<div class="form-group">
									<label class="col-md-12">Company Name</label>
									<div class="col-md-12">
										<b id="companyName">
											<h3></h3>
										</b>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-12">Designation</label>
									<div class="col-sm-12">
										<b id="designation">
											<h3></h3>
										</b>
									</div>
								</div>
								<div class="form-group">
									<div class="col-sm-12">
										<button class="btn btn-success" type="button" id="viewUpdateScreen">Update Profile</button>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Added by vigil -->
					<div id="updateProfile" class="col-md-8 col-xs-12" style="display: none">
						<div class="white-box">
							<form class="form-horizontal form-material">
								<div class="form-group">
									<label class="col-md-12">Name</label>
									<div class="col-md-12">
										<input type="text" id="uname" class="form-control form-control-line ">
									</div>
								</div>
								<div class="form-group">
									<label for="example-email" class="col-md-12">Company
										Email</label>
									<div class="col-md-12">
										<input type="email" id="ucompanyEmail" class="form-control form-control-line" name="example-email">
									</div>
								</div>
								<div class="form-group">
									<label for="example-email" class="col-md-12">Email</label>
									<div class="col-md-12">
										<input type="email" id="uemail" class="form-control form-control-line" name="example-email">
									</div>
								</div>
								<div class="form-group">
									<label class="col-md-12">Reset Password</label>
									<div class="col-md-12">
										<button type="button" class="btn btn-success" id="resetPassword">Reset</button>
									</div>
								</div>
								<div id="passwordArea" style="display: none">
									<div class="form-group">
										<label class="col-md-12">Password</label>
										<div class="col-md-12">
											<input type="password" id="upassword" value="password" class="form-control form-control-line">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-12">Re-enter Password</label>
										<div class="col-md-12">
											<input type="password" id="urePassword" value="password" class="form-control form-control-line">
										</div>
									</div>
								</div>
								<div class="form-group">
									<label class="col-md-12">Phone No</label>
									<div class="col-md-12">
										<input type="text" id="uphone" class="form-control form-control-line ">
									</div>
								</div>
								<div class="form-group">
									<label class="col-md-12">companyName</label>
									<div class="col-md-12">
										<input type="text" id="ucompanyName" class="form-control form-control-line ">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-12">Designation</label>
									<div class="col-sm-12">
										<input type="text" id="udesignation" class="form-control form-control-line">
									</div>
								</div>
								<div class="form-group">
									<div class="col-sm-12">
										<button id="update" type="button" class="btn btn-success">Update</button>
									</div>
								</div>
							</form>
						</div>
					</div>
					<!-- Added by vigil -->




				</div>
				<!-- /.row -->
			</div>
			<!-- /.container-fluid -->
			<footer class="footer text-center"> 2019 &copy; Owned By OpnLabs </footer>
		</div>
		<!-- /#page-wrapper -->
	</div>
	<!-- /#wrapper -->
	<!-- jQuery -->
	<script src="../plugins/bower_components/jquery/dist/jquery.min.js"></script>
	<!-- Bootstrap Core JavaScript -->
	<script src="bootstrap/dist/js/bootstrap.min.js"></script>
	<!-- Menu Plugin JavaScript -->
	<script src="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.js"></script>
	<!--slimscroll JavaScript -->
	<script src="js/jquery.slimscroll.js"></script>
	<!--Wave Effects -->
	<script src="js/waves.js"></script>
	<!-- Custom Theme JavaScript -->
	<script src="js/custom.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {

			$("#resetPassword").click(function () {
				$("#upassword").val('');
				$("#urePassword").val('');
				$("#passwordArea").toggle();
			});


			$('#nameHere').text(localStorage.getItem("userName"));
			$.ajaxSetup({
				headers: {
					'Authorization': 'Bearer ' + localStorage.getItem('token')
				}
			});

			getUserProfile();
		});

		$("#viewUpdateScreen").click(function () {
			$("#updateProfile").show();
			$("#userProfile").hide();

		})

		function getUserProfile() {
			$.get("http://localhost:8009/user/getUserProfile", function (data,
				status) {

				// var obj = JSON.parse(data.jsonResponse);

				localStorage.setItem("userDetails", JSON.stringify(data));

				displayProfile(data);

			});
		}

		$('#update')
			.click(
				function () {

					var oldUserDetails = JSON.parse(localStorage
						.getItem("userDetails"));

					var updatedValues = {
						"userId": oldUserDetails.userId,
						"companyEmail": $('#ucompanyEmail').val(),
						"password": $('#upassword').val(),
						"userName": oldUserDetails.userName,
						"name": $('#uname').val(),
						"domainLimit": oldUserDetails.domainLimit,
						"personalDetails": {
							"personalDetailId": oldUserDetails.personalDetails.personalDetailId,
							"designation": $('#udesignation').val(),
							"phoneNumber": $('#uphone').val(),
							"companyName": $('#ucompanyName').val(),
							"email": $('#uemail').val()
						}
					}

					$
						.ajax({
							url: 'http://localhost:8009/user/updateUserDetails',
							type: 'post',
							dataType: 'json',
							contentType: 'application/json',
							data: JSON.stringify(updatedValues),
							success: function (data) {
								displayProfile(data);
							}
						});

				});

		function displayProfile(data) {
			$('#name h3').text(data.name);
			$('#companyEmail h3').text(data.companyEmail);
			$('#email h3').text(data.personalDetails.email);
			$('#phone h3').text(data.personalDetails.phoneNumber);
			$('#companyName h3').text(data.personalDetails.companyName);
			$('#designation h3').text(data.personalDetails.designation);

			$('#uname').val(data.name);
			$('#ucompanyEmail').val(data.companyEmail);
			$('#uemail').val(data.personalDetails.email);
			$('#uphone').val(data.personalDetails.phoneNumber);
			$('#ucompanyName').val(data.personalDetails.companyName);
			$('#udesignation').val(data.personalDetails.designation);
		}
	</script>
</body>

</html>